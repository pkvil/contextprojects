\startenvironment assignments-environment

\mainlanguage[en]

%%
%% F O N T S
%%

\setupbodyfont[sabonnext,11pt]
\definebodyfontenvironment[11pt][interlinespace=14.5pt]
\definesymbol[leaf][\fontchar{leaf}] % by name

%%
%% P A P E R   A N D   P A G E   S I Z E
%%

\setuppapersize[A4][A4]

%%
%% P A G E   L A Y O U T
%%

\setuplayout[
    grid=yes,
   % TOP TO BOTTOM    
    topspace=30mm,
    header=0\baselineskip,
    headerdistance=0\baselineskip,
    height=240mm,
    footerdistance=2\baselineskip,
    footer=1\lineheight,
   % INNER TO OUTER
%    backspace=\dimexpr(\paperwidth/8)\relax,% twosided
    backspace=45mm,% onesided
    leftmargin=64pt,
    leftmargindistance=9pt,
    width=120mm,
    rightmargin=64pt,
    rightmargindistance=16pt,
]

\setuppagenumbering[location=,]

%%
%% S E C T I O N I N G
%%

\definepagebreak[emptypagebreak][yes,header,footer,right]

% FRONTMATTER

\startsectionblockenvironment[frontpart]
 % \setcounter[userpage][1]
 % \setupuserpagenumber [numberconversion=romannumerals]
\setupheadertexts[\hss{\getmarking[chapter}\hss] % recto outer
                 [test] % recto inner
                 [] % verso inner
                 [] % verso outer
\setupfootertexts[] % recto outer
                 [] % recto inner
                 [] % verso inner
                 [] % verso outer
\stopsectionblockenvironment

% BODYMATTER

\startsectionblockenvironment[bodypart]
    \setcounter[userpage][1]
\stopsectionblockenvironment

% CHAPTER


\setuplabeltext[en][chapter=Topic ]

\def\Dot#1{#1:}

\setuphead[chapter]
    [page=no,
    header=empty,
    style=\tf,
%    alternative=middle,
    numberstyle={\feature[+][lnum]},
%    numbercommand=\Dot,
%    textcommand={\kerncharacters[0.16]\spaceskip0.35em},
%    deeptextcommand=\WORD,
    after={\blank[line]},
    before=,
]

%
% QUESTION
%



\definehead[question][section]
\setuphead[question][%alternative=inmargin,
style=\sl,interlinespace=14pt,
before={\blank[line]},after={\blank[line]},]

\definehead[questionnonumber][question]
\setuphead[questionnonumber][number=no]

%%
%% P A R A G R A P H
%%

\setupindenting[yes,medium] % indent paragraphs
%\setupwhitespace[no] % whitespace between paragraphs

\setupspacing[packed] % French spacing

\setupitaliccorrection[text]

\setupalign[hanging,hz,tolerant] % microtypography, allow some stretching

%%
%% H E A D E R S   &   F O O T E R S
%%


\setupheadertexts[\hfill{\kerncharacters[0.17]\sc \getmarking[chapter]}\hfill] %recto outer
                 [] % recto inner
                 [] % verso inner
                 [\hfill{\kerncharacters[0.17]\sc \getmarking[chapter]}\hfill] % verso outer

%\setupfootertexts[\hfill\lower0.7em \hbox{\definedfont[file:FeFlow2 at 14pt]t} \pagenumber\ \lower0.7em 
%\hbox{\definedfont[file:FeFlow2 at 14pt]s}\hfill] % recto outer
%                 [] % recto inner
%                 [] % verso inner
%                 [\hfill{\definedfont[file:FeFlow2]t} \pagenumber\ {\definedfont[file:FeFlow2]s}\hfill] % verso outer

\setupfootertexts[\hfill\pagenumber\hfill][][][\hfill\pagenumber\hfill]

%%
%% M I S C
%%

\setupexternalfigures[directory=images]

%
% ASSIGNMENT HEADER
%

\define[4]\nameanddate{%
\startalignment[left]
\noindent #1\par
{\kerncharacters[0.1]ISHTA YTT} Homework\par
%\blank[halfline]
%\blank[halfline] 
\noindent #2 {\sc #3, #4}\par
\stopalignment
\blank[3*line]}

%%
%% D R O P   C A P S
%%

% M

\define[1]\dropcapM{%
    \definefont[capfont][Serif at 49pt]
    \definefont[quotefont][Serif at 16pt]
    \noindent\kern -0.08em
    {\capfont M}
    \vskip-4\baselineskip
    \dimen1=3.85em
    \dimen2=3.85em
    \dimen3=3.85em
    \parshape 4
        \dimen1 \dimexpr\hsize-\dimen1
        \dimen2 \dimexpr\hsize-\dimen2       
        \dimen3 \dimexpr\hsize-\dimen3     
        0pc \hsize                                   
    \noindent{\kerncharacters[0.14]\sc #1}%            
}

% D

\define[1]\dropcapD{%
    \definefont[capfont][Serif at 49pt]
    \definefont[quotefont][Serif at 16pt]
    \noindent\kern -0.16em
    {\capfont D}
    \vskip-4\baselineskip
    \dimen1=2.73em
    \dimen2=3.2em
    \dimen3=2.9em
    \parshape 4
        \dimen1 \dimexpr\hsize-\dimen1
        \dimen2 \dimexpr\hsize-\dimen2       
        \dimen3 \dimexpr\hsize-\dimen3     
        0pc \hsize                                   
    \noindent{\kerncharacters[0.14]\sc #1}%            
}

%%
%% V I S U A L   D E B U G G I N G
%%

%\showframe
%\showboxes
%\showgrid

%\enabletrackers[visualizers.justification]

%\adaptlayout[7][lines=+1]
%\adaptlayout[11][lines=+1]
%\adaptlayout[14][lines=+1]


\stopenvironment
